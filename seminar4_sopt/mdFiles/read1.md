# 1. Database

![image](https://user-images.githubusercontent.com/26458200/49019089-74cec680-f1d0-11e8-85c8-3723e6f5e45a.png)

## Database
- 체계화된 데이터의 모임
- 여러 사람이 공유하고 사용할 목적으로 통합 관리되는 정보의 집합이다.
- 종류
    + RDB모델 : SQL 사용
    + NoSQL모델 : SQL 사용하지 않음
- 데이터 베이스의 특징
    + 실시간 접근성
    + 지속적인 변화
    + 동시 공유
    + 내용에 대한 참조
    + 데이터 논리적 독립성
## RDB
- RDB : Relation Database, 관계형 데이터베이스
- Key-value들의 간단한 관계를 테이블화 시킨 매우 간단한 원칙의 데이터베이스
- 데이터를 column과 row를 이루는 하나 이상의 테이블로 정리한다.
- 각 테이블은 하나의 Entity 타입을 대표한다.
- 각 row는 그 entity 종류의 인스턴스를 대표하며, column은 그 인스턴스의 속성이 되는 값들을 대표한다.

#### 용어 정리
+ row, tuple, record : 하나의 항목을 대표하는 데이터
+ column, attribute, field : tuple의 이름
+ table : 같은 속성을 공유하는 tuple의 모임
+ key : table의 각 row에는 저만의 고유 키가 있다. 한 테이블 안의 로우는 다른 테이블들의 로우로 연결이 가능하다.
+ relationships : 테이블 간사이 관계 > 1:1, 1:N, N:M 관계
+ transaction : DBMS가 효율적이고 정확하게 운용되기 위해서는 ACID트랜잭션을 갖추고 있어야한다.

#### relationships
- 1:1 관계
    + 한 명의 회원은 하나의 고유번호를 가진다.
    + 하나의 글 쓴 사람은 오직 한명이다.
- 1:N 관계
    + 한 명의 회원은 하나의 파트만 속할 수 있으나 하나의 파트에는 여러 사람이 속할 수 있다.
    + 하나의 글에는 여러개의 댓글이 포함되어있을 수 있으나, 하나의 댓글은 오직 하나의 글에만 속한다.
- N:M 관계
    + 한 학생은 여러 학과를 전공할 수 있고, 학과 역시 여러 학생이 속할 수 있다.
    + 한 회원은 여러 개의 글에 "좋아요"를 할 수 있고, 하나의 글은 여러명이 "좋아요"를 할 수 있다.

#### 데이터 무결성 (Data Integrity)
- 완전한 수명 주기를 거치며 데이터의 정확성과 일관성을 유지하고 보증하는 것을 나타낸다.
- 데이터 베이스, RDBMS의 중요한 기능이다.
- 무결성 제한의 유형
    + 개체 무결성(Entity Integrity) : 고유 키(유일 키)의 개념과 관련된다. 개체 무결성은 모든 테이블이 기본키(Primary Key)를 가져야하고, 기본 키로 선택된 컬럼은 고유해야하며 **빈 값은 허용하지 않는다.**
    + 참조 무결성(Referential Integrity) : 외래 키(외부 키)의 개념과 관련된다. 두 가지 상태 중 하나만 속함을 규정한다. 외래 키 값이 특정 테이블의 기본 키 값을 참조하는 것이다. 또는 빈 값을 허용한다.
    + 범위 무결성(Domain Integrity) : 정의된 범위에서 RDB의 모든 컬럼이 선언되도록 규정한다.

#### Transation(트랜잭션)의 속성
- Atomicity(원자성) : 트랜잭션 내의 모든 처리는 전부 성공하거나, 전부 실패해야 한다.
- Consistency(일관성) : 트랜잭션 실행이 성공하면 언제나 일관성 있는 데이터베이스 상태를 유지해야한다.
- Isolation(고립성) : 서로 다른 트랜잭션끼리 영향을 줄 수 없다.
- Durability(영속성/지속성) : 트랜잭션의 결과는 지속되야한다.

## Index
- RDBMS에서 검색 속도를 높이기 위해 사용하는 기술이다.
- 색인기능
- 해당 테이블의 컬럼을 색인화(따로 파일로 저장)하여 검색시 테이블 전체를 Full Scan하는 것이 아니라 색인화 되어있는 index 파일을 검색하여 검색 속도를 빠르게 한다.
- B+ 트리로 저장된다.
- index로 설정한 컬럼 값이 변경되거나 추가되면, index 역시 변경된다. 따라서 적절하게 index를 설정해야한다.
- 데이터의 삽입, 삭제가 빈번한 경우 index의 성능이 떨어진다. 매번 B+ 트리를 수정해야하기 때문이다.
- index가 DB의 공간을 차지하기 때문에 추가적인 공간이 필요하다.
- WHERE의 타겟이 되는 컬럼을 인덱스로 만드는 것이 좋다.
- 데이터의 중복도가 높은 컬럼은 Index로 만들어도 효과가 없다.
- 사용하지 않는 인덱스는 제거하는 것이 좋다.
- Primary key는 자동으로 index로 등록된다.

## 정규화
- RDB 설계에서 중복을 최소화 하게 데이터를 구조화하는 과정
- 기본 정규화 : 1NF, 2NF, 3NF, BCNF
- 고급 정규화 : 4NF, 5NF
- 새로운 형태의 데이터가 삽입될 때 테이블 설계를 재구성할 필요성을 감소시킨다.
- 정규화가 잘 되있다면 기획자 추가 요구사항 기능 추가에 무리가 없다.
- 과도한 정규화는 복잡한 DB 모델링이 될 수 있다. (정규화를 안하는게 성능상 이득일 수 있다.)
- DB 모델링 및 정규화 작업을 가장 신경써야 한다.
- 구성되는 모든 테이블이 중복되지 않게 효과적으로 DB내 표현이 가능하도록 한다.
- 보다 간단한 연산자에 의해 효과적인 연산이 가능하게 구성한다.
- 새로운 형태의 데이터가 삽입될 때 테이블 설계를 재구성할 필요성을 감소시킨다.
- 자료의 저장 공간을 최소화 한다.
- 자료의 불일치를 최소화한다.
- 자료구조를 안정화 시킨다.
- 자료의 삽입, 삭제, 갱신 이상을 방지한다.

#### 상태이상
- 테이블 내 데이터의 중복과 종속으로 인해 발생되는 오류이다.
- 여러가지 사실을 하나의 테이블로 표현하기 때문에 발생한다.
- 삭제이상 : 원하지 않는 자료가 삭제되거나, 원하는 자료가 삭제되지 않는 이상이다.
- 삽입이상 : 원하지 않는 자료가 삽입되거나, 원하는 자료가 삽입되지 않는 이상이다.
- 갱신이상 : 데이터를 조회할 때 데이터가 모호해지거나 일관성이 없어지는 이상이다.

#### 제 1 정규화
- 어떤 테이블에 속한 모든 도메인이 원자 값(분해 될 수 없는값, 하나의 값)으로만 구성된다.
- 각 로우마다 컬럼의 값이 1개이다.
![image](https://user-images.githubusercontent.com/26458200/49020584-2c190c80-f1d4-11e8-9e9b-8930cde16f9d.png)

#### 제 2 정규화
- 제 1 정규형을 만족시킨다.
- 기본키에 속하지 않는 모든 속성이 기본키에 완전 함수 종속이다.
![image](https://user-images.githubusercontent.com/26458200/49020630-4bb03500-f1d4-11e8-93fd-156874e14ee3.png)

#### 제 3 정규화
- 제 2 정규형을 만족시킨다.
- 기본 키 이외의 다른 컬럼이 그 외 다른 컬럼을 결정 할 수 없다.
- 기본 키가 아닌 다른 키로 데이터가 결정될 수 있기 때문에 중복데이터가 발생한다.
![image](https://user-images.githubusercontent.com/26458200/49020754-8a45ef80-f1d4-11e8-8423-cc9427715f57.png)

#### BCNF(Boyce-Codd Normal Function) 정규화
- 제 3 정규화를 강화한 것이다.
- BCNF 정규화는 제 3 정규화에 속하지만, 역은 아니다.
- 모든 결정자가 후보 키이다.
![image](https://user-images.githubusercontent.com/26458200/49020852-be211500-f1d4-11e8-8c4e-877cac028924.png)
![image](https://user-images.githubusercontent.com/26458200/49020878-cda05e00-f1d4-11e8-9cce-053e704ff54b.png)

#### 역 정규화
- 정규화 된 테이블을 물리적 데이터 모델링 과정에서 다시 통합하거나 분할하여 구조를 재조정하는 과정이다.
- 정규화 된 데이터 모델링은 실제 데이터를 조회하는 과정에서 성능저하가 발생한다.